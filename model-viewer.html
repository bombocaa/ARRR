<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>model-viewer AR (Quick Look, Scene Viewer, WebXR)</title>
    <meta name="description" content="A minimal model-viewer example supporting iOS Quick Look, Android Scene Viewer, and WebXR." />
    <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
    <style>
      html, body { height: 100%; margin: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; background: #0b1020; color: #e5e7eb; }
      .header { display: none; }
      model-viewer { width: 100%; height: 100%; --poster-color: #0b1020; }
      .caption { position: fixed; bottom: 12px; left: 12px; right: 12px; color: #cbd5e1; font-size: .95rem; text-shadow: 0 1px 2px #0008; }
      .caption code { background: #0006; padding: 1px 6px; border-radius: 6px; }
      .credit { position: fixed; bottom: 12px; right: 12px; font-size: 0.85rem; color: #9ca3af; }
    </style>
  </head>
  <body>
    <div class="header"></div>

    <!--
      Notes:
      - src: GLB/GLTF for web preview
      - ios-src: USDZ for iOS Quick Look
      - ar-modes: 'quick-look scene-viewer webxr'
      - ar: shows the AR button
    -->
    <model-viewer
      id="viewer"
      src="assets/room.glb"
      ios-src="assets/roomm.usdz"
      alt="Room model"
      ar
      ar-modes="quick-look"
      ar-placement="floor"
      ar-scale="fixed"
      camera-controls
      exposure="0.9"
      shadow-intensity="0.8"
      environment-image="legacy"
    >
      <button slot="ar-button" style="position: absolute; left: 50%; transform: translateX(-50%); bottom: 24px; padding: 10px 16px; border-radius: 999px; border: 0; background: #4c9aff; color: white; font-weight: 700; box-shadow: 0 6px 20px #0006;">View in AR Quick Look</button>
      <div id="ar-prompt" slot="ar-prompt" style="display:none"></div>
    </model-viewer>

    

    <script type="module">
      // Auto-open Quick Look on iOS by redirecting straight to the USDZ.
      const isIOS = /iPhone|iPad|iPod/i.test(navigator.userAgent);
      if (isIOS) {
        const usdzUrl = 'assets/roomm.usdz';
        // Delay to allow page load/render when coming from QR scan, then redirect.
        setTimeout(() => { window.location.replace(usdzUrl); }, 150);
      }
    </script>
  </body>
  </html>


